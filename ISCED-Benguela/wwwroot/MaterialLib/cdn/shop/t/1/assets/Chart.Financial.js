/*!
 * chartjs-chart-financial
 * Version: 0.1.0
 *
 * Copyright 2017 chartjs-chart-financial contributors
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-chart-financial/blob/master/LICENSE.md
 */(function e(t,n,r){function s(o2,u){if(!n[o2]){if(!t[o2]){var a=typeof require=="function"&&require;if(!u&&a)return a(o2,!0);if(i)return i(o2,!0);var f=new Error("Cannot find module '"+o2+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o2]={exports:{}};t[o2][0].call(l.exports,function(e2){var n2=t[o2][1][e2];return s(n2||e2)},l,l.exports,e,t,n,r)}return n[o2].exports}for(var i=typeof require=="function"&&require,o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require2,module,exports){},{}],2:[function(require2,module,exports){"use strict";module.exports=function(Chart){Chart.defaults.candlestick=Object.assign({},Chart.defaults.financial),Chart.defaults.candlestick.scales={xAxes:[Object.assign({},Chart.defaults.financial.scales.xAxes[0])],yAxes:[Object.assign({},Chart.defaults.financial.scales.yAxes[0])]},Chart.controllers.candlestick=Chart.controllers.financial.extend({dataElementType:Chart.elements.Candlestick,updateElement:function(element,index,reset){var me=this,meta=me.getMeta(),dataset=me.getDataset();element._xScale=me.getScaleForId(meta.xAxisID),element._yScale=me.getScaleForId(meta.yAxisID),element._datasetIndex=me.index,element._index=index,element._model={datasetLabel:dataset.label||"",color:dataset.color,borderColor:dataset.borderColor,borderWidth:dataset.borderWidth},me.updateElementGeometry(element,index,reset),element.pivot()}})}},{}],3:[function(require2,module,exports){"use strict";module.exports=function(Chart){Chart.defaults.financial={label:"",hover:{mode:"label"},scales:{xAxes:[{type:"time",distribution:"series",categoryPercentage:.8,barPercentage:.9,ticks:{source:"data"}}],yAxes:[{type:"financialLinear"}]},tooltips:{callbacks:{label:function(tooltipItem,data){var o=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].o,h=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].h,l=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].l,c=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].c,fractionalDigitsCount=data.datasets[tooltipItem.datasetIndex].fractionalDigitsCount;return fractionalDigitsCount!==void 0&&(fractionalDigitsCount=Math.max(0,Math.min(100,fractionalDigitsCount)),o=o.toFixed(fractionalDigitsCount),h=h.toFixed(fractionalDigitsCount),l=l.toFixed(fractionalDigitsCount),c=c.toFixed(fractionalDigitsCount))," O: "+o+"    H: "+h+"    L: "+l+"    C: "+c}}}},Chart.controllers.financial=Chart.controllers.bar.extend({dataElementType:Chart.elements.Financial,updateElementGeometry:function(element,index,reset){var me=this,model=element._model,vscale=me.getValueScale(),base=vscale.getBasePixel(),horizontal=vscale.isHorizontal(),ruler=me._ruler||me.getRuler(),vpixels=me.calculateBarValuePixels(me.index,index),ipixels=me.calculateBarIndexPixels(me.index,index,ruler);model.horizontal=horizontal,model.base=reset?base:vpixels.base,model.x=horizontal?reset?base:vpixels.head:ipixels.center,model.y=horizontal?ipixels.center:reset?base:vpixels.head,model.height=horizontal?ipixels.size:void 0,model.width=horizontal?void 0:ipixels.size,model.candle=me.calculateCandleValuesPixels(me.index,index)},calculateCandleValuesPixels:function(datasetIndex,index){var me=this,chart=me.chart,scale=me.getValueScale(),datasets=chart.data.datasets;return{o:scale.getPixelForValue(Number(datasets[datasetIndex].data[index].o)),h:scale.getPixelForValue(Number(datasets[datasetIndex].data[index].h)),l:scale.getPixelForValue(Number(datasets[datasetIndex].data[index].l)),c:scale.getPixelForValue(Number(datasets[datasetIndex].data[index].c))}},draw:function(){var ctx=this.chart.chart.ctx,elements=this.getMeta().data,dataset=this.getDataset(),ilen=elements.length,i=0,d;for(Chart.canvasHelpers.clipArea(ctx,this.chart.chartArea);i<ilen;++i)d=dataset.data[i].o,d!=null&&!isNaN(d)&&elements[i].draw();Chart.canvasHelpers.unclipArea(ctx)}})}},{}],4:[function(require2,module,exports){"use strict";module.exports=function(Chart){Chart.defaults.ohlc=Object.assign({},Chart.defaults.financial),Chart.defaults.ohlc.scales={xAxes:[Object.assign({},Chart.defaults.financial.scales.xAxes[0])],yAxes:[Object.assign({},Chart.defaults.financial.scales.yAxes[0])]},Chart.defaults.ohlc.scales.xAxes[0].barPercentage=1,Chart.defaults.ohlc.scales.xAxes[0].categoryPercentage=1,Chart.controllers.ohlc=Chart.controllers.financial.extend({dataElementType:Chart.elements.Ohlc,updateElement:function(element,index,reset){var me=this,meta=me.getMeta(),dataset=me.getDataset();element._xScale=me.getScaleForId(meta.xAxisID),element._yScale=me.getScaleForId(meta.yAxisID),element._datasetIndex=me.index,element._index=index,element._model={datasetLabel:dataset.label||"",lineWidth:dataset.lineWidth,armLength:dataset.armLength,armLengthRatio:dataset.armLengthRatio,color:dataset.color},me.updateElementGeometry(element,index,reset),element.pivot()}})}},{}],5:[function(require2,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,globalOpts=Chart.defaults.global;globalOpts.elements.candlestick=Object.assign(globalOpts.elements.financial,{borderColor:globalOpts.elements.financial.color.unchanged,borderWidth:1}),Chart.elements.Candlestick=Chart.elements.Financial.extend({draw:function(){var ctx=this._chart.ctx,vm=this._view,x=vm.x,o=vm.candle.o,h=vm.candle.h,l=vm.candle.l,c=vm.candle.c;ctx.strokeStyle=helpers.getValueOrDefault(vm.borderColor,globalOpts.elements.candlestick.borderColor),ctx.lineWidth=helpers.getValueOrDefault(vm.borderWidth,globalOpts.elements.candlestick.borderWidth),c<o?ctx.fillStyle=helpers.getValueOrDefault(vm.color?vm.color.up:void 0,globalOpts.elements.candlestick.color.up):c>o?ctx.fillStyle=helpers.getValueOrDefault(vm.color?vm.color.down:void 0,globalOpts.elements.candlestick.color.down):ctx.fillStyle=helpers.getValueOrDefault(vm.color?vm.color.unchanged:void 0,globalOpts.elements.candlestick.color.unchanged),ctx.beginPath(),ctx.moveTo(x,h),ctx.lineTo(x,Math.min(o,c)),ctx.moveTo(x,l),ctx.lineTo(x,Math.max(o,c)),ctx.stroke(),ctx.fillRect(x-vm.width/2,c,vm.width,o-c),ctx.strokeRect(x-vm.width/2,c,vm.width,o-c),ctx.closePath()}})}},{}],6:[function(require2,module,exports){"use strict";module.exports=function(Chart){var globalOpts=Chart.defaults.global;globalOpts.elements.financial={color:{up:"rgba(80, 160, 115, 1)",down:"rgba(215, 85, 65, 1)",unchanged:"rgba(90, 90, 90, 1)"},fractionalDigitsCount:void 0};function isVertical(bar){return bar._view.width!==void 0}function getBarBounds(candle){var vm=candle._view,x1,x2,y1,y2,halfWidth=vm.width/2;return x1=vm.x-halfWidth,x2=vm.x+halfWidth,y1=vm.candle.h,y2=vm.candle.l,{left:x1,top:y1,right:x2,bottom:y2}}Chart.elements.Financial=Chart.Element.extend({height:function(){var vm=this._view;return vm.base-vm.y},inRange:function(mouseX,mouseY){var inRange=!1;if(this._view){var bounds=getBarBounds(this);inRange=mouseX>=bounds.left&&mouseX<=bounds.right&&mouseY>=bounds.top&&mouseY<=bounds.bottom}return inRange},inLabelRange:function(mouseX,mouseY){var me=this;if(!me._view)return!1;var inRange=!1,bounds=getBarBounds(me);return isVertical(me)?inRange=mouseX>=bounds.left&&mouseX<=bounds.right:inRange=mouseY>=bounds.top&&mouseY<=bounds.bottom,inRange},inXRange:function(mouseX){var bounds=getBarBounds(this);return mouseX>=bounds.left&&mouseX<=bounds.right},inYRange:function(mouseY){var bounds=getBarBounds(this);return mouseY>=bounds.top&&mouseY<=bounds.bottom},getCenterPoint:function(){var vm=this._view,x,y,halfWidth=vm.width/2;return x=vm.x-halfWidth,y=(vm.candle.h+vm.candle.l)/2,{x:x,y:y}},getArea:function(){var vm=this._view;return vm.width*Math.abs(vm.y-vm.base)},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:(vm.candle.h+vm.candle.l)/2}}})}},{}],7:[function(require2,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,globalOpts=Chart.defaults.global;globalOpts.elements.ohlc=Object.assign(globalOpts.elements.financial,{lineWidth:2,armLength:null,armLengthRatio:.8}),Chart.elements.Ohlc=Chart.elements.Financial.extend({draw:function(){var ctx=this._chart.ctx,vm=this._view,x=vm.x,o=vm.candle.o,h=vm.candle.h,l=vm.candle.l,c=vm.candle.c,armLength=helpers.getValueOrDefault(vm.armLength,globalOpts.elements.ohlc.armLength),armLengthRatio=helpers.getValueOrDefault(vm.armLengthRatio,globalOpts.elements.ohlc.armLengthRatio);armLength===null&&(armLength=vm.width*armLengthRatio*.5),c<o?ctx.strokeStyle=helpers.getValueOrDefault(vm.color?vm.color.up:void 0,globalOpts.elements.ohlc.color.up):c>o?ctx.strokeStyle=helpers.getValueOrDefault(vm.color?vm.color.down:void 0,globalOpts.elements.ohlc.color.down):ctx.strokeStyle=helpers.getValueOrDefault(vm.color?vm.color.unchanged:void 0,globalOpts.elements.ohlc.color.unchanged),ctx.lineWidth=helpers.getValueOrDefault(vm.lineWidth,globalOpts.elements.ohlc.lineWidth),ctx.beginPath(),ctx.moveTo(x,h),ctx.lineTo(x,l),ctx.moveTo(x-armLength,o),ctx.lineTo(x,o),ctx.moveTo(x+armLength,c),ctx.lineTo(x,c),ctx.stroke()}})}},{}],8:[function(require2,module,exports){"use strict";var Chart=require2("chart.js");Chart=typeof Chart=="function"?Chart:window.Chart,require2("./scale.financialLinear.js")(Chart),require2("./element.financial.js")(Chart),require2("./element.candlestick.js")(Chart),require2("./element.ohlc.js")(Chart),require2("./controller.financial.js")(Chart),require2("./controller.candlestick.js")(Chart),require2("./controller.ohlc.js")(Chart)},{"./controller.candlestick.js":2,"./controller.financial.js":3,"./controller.ohlc.js":4,"./element.candlestick.js":5,"./element.financial.js":6,"./element.ohlc.js":7,"./scale.financialLinear.js":9,"chart.js":1}],9:[function(require2,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,defaultConfig={position:"left",ticks:{callback:Chart.Ticks.formatters.linear}},FinancialLinearScale=Chart.scaleService.getScaleConstructor("linear").extend({determineDataLimits:function(){var me=this,chart=me.chart,data=chart.data,datasets=data.datasets,isHorizontal=me.isHorizontal();function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id}me.min=null,me.max=null,helpers.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&helpers.each(dataset.data,function(rawValue){var high=rawValue.h,low=rawValue.l;(me.min===null||low<me.min)&&(me.min=low),(me.max===null||high>me.max)&&(me.max=high)})});var space=(me.max-me.min)*.05;me.min-=space,me.max+=space,this.handleTickRangeOptions()}});Chart.scaleService.registerScaleType("financialLinear",FinancialLinearScale,defaultConfig)}},{}]},{},[8]);
//# sourceMappingURL=/cdn/shop/t/1/assets/Chart.Financial.js.map?v=34644991646752552951528498109
